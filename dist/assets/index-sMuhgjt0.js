(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const y of document.querySelectorAll('link[rel="modulepreload"]'))d(y);new MutationObserver(y=>{for(const h of y)if(h.type==="childList")for(const E of h.addedNodes)E.tagName==="LINK"&&E.rel==="modulepreload"&&d(E)}).observe(document,{childList:!0,subtree:!0});function n(y){const h={};return y.integrity&&(h.integrity=y.integrity),y.referrerPolicy&&(h.referrerPolicy=y.referrerPolicy),y.crossOrigin==="use-credentials"?h.credentials="include":y.crossOrigin==="anonymous"?h.credentials="omit":h.credentials="same-origin",h}function d(y){if(y.ep)return;y.ep=!0;const h=n(y);fetch(y.href,h)}})();(function(e){let s,n;function d(){n.frequency.value=0}function y(){s.resume()}const h=1,E=2,ye=4,Te=[],S=64,q=64,Oe=[{id:"U",index:12,physicalButtonPressed:!1,pressedPrevious:!1,pressedCurrent:!1,isPressed:!1,isJustPressed:!1,isJustReleased:!1},{id:"D",index:13,physicalButtonPressed:!1,pressedPrevious:!1,pressedCurrent:!1,isPressed:!1,isJustPressed:!1,isJustReleased:!1},{id:"L",index:14,physicalButtonPressed:!1,pressedPrevious:!1,pressedCurrent:!1,isPressed:!1,isJustPressed:!1,isJustReleased:!1},{id:"R",index:15,physicalButtonPressed:!1,pressedPrevious:!1,pressedCurrent:!1,isPressed:!1,isJustPressed:!1,isJustReleased:!1},{id:"A",index:0,physicalButtonPressed:!1,pressedPrevious:!1,pressedCurrent:!1,isPressed:!1,isJustPressed:!1,isJustReleased:!1},{id:"B",index:1,physicalButtonPressed:!1,pressedPrevious:!1,pressedCurrent:!1,isPressed:!1,isJustPressed:!1,isJustReleased:!1}],J1=()=>{for(const i of Oe)i.physicalButtonPressed=!1},U1=(i,r)=>r>i.buttons.length-1?null:i.buttons[r],we=[{id:"U",x:13,y:78,width:9,height:9,pressedPrevious:!1,pressedCurrent:!1,isPressed:!1,isJustPressed:!1,isJustReleased:!1},{id:"D",x:13,y:98,width:9,height:9,pressedPrevious:!1,pressedCurrent:!1,isPressed:!1,isJustPressed:!1,isJustReleased:!1},{id:"L",x:3,y:88,width:9,height:9,pressedPrevious:!1,pressedCurrent:!1,isPressed:!1,isJustPressed:!1,isJustReleased:!1},{id:"R",x:23,y:88,width:9,height:9,pressedPrevious:!1,pressedCurrent:!1,isPressed:!1,isJustPressed:!1,isJustReleased:!1},{id:"A",x:42,y:88,width:12,height:12,pressedPrevious:!1,pressedCurrent:!1,isPressed:!1,isJustPressed:!1,isJustReleased:!1},{id:"B",x:57,y:79,width:12,height:12,pressedPrevious:!1,pressedCurrent:!1,isPressed:!1,isJustPressed:!1,isJustReleased:!1}];let Be,A1,N1;const xe=new Map,F1=(i,r)=>!![...i.values()].includes(r),b1=i=>T1(i.pageX,i.pageY,-1),X1=i=>O1(i.pageX,i.pageY,-1),W1=i=>w1(i.pageX,i.pageY,-1),K1=i=>{for(const r of i.changedTouches)T1(r.pageX,r.pageY,r.identifier)},S1=i=>{i.preventDefault();for(const r of i.changedTouches)O1(r.pageX,r.pageY,r.identifier)},H1=i=>{i.preventDefault();for(const r of i.changedTouches)w1(r.pageX,r.pageY,r.identifier)},T1=(i,r,l)=>{const t=B1(i,r),o=R1(t.x,t.y);o==null?xe.set(`${l}`,"-"):xe.set(`${l}`,o.id)},O1=(i,r,l)=>{if(xe.get(`${l}`)){const t=B1(i,r),o=R1(t.x,t.y);o==null?xe.set(`${l}`,"-"):xe.set(`${l}`,o.id)}},w1=(i,r,l)=>xe.delete(`${l}`),B1=(i,r)=>{if(screen!=null)return{x:Math.round(((i-Be.offsetLeft)/Be.clientWidth+.5)*A1),y:Math.round(((r-Be.offsetTop)/Be.clientHeight+.5)*N1)}},R1=(i,r)=>{for(let l=0;l<we.length;l++){const t=we[l];if(i>=t.x&&i<=t.x+t.width&&r>=t.y&&r<=t.y+t.height)return t}return null},Re=[{id:"U",codes:["ArrowUp","KeyW"],physicalKeyDown:!1,pressedPrevious:!1,pressedCurrent:!1,isPressed:!1,isJustPressed:!1,isJustReleased:!1},{id:"D",codes:["ArrowDown","KeyS"],physicalKeyDown:!1,pressedPrevious:!1,pressedCurrent:!1,isPressed:!1,isJustPressed:!1,isJustReleased:!1},{id:"L",codes:["ArrowLeft","KeyA"],physicalKeyDown:!1,pressedPrevious:!1,pressedCurrent:!1,isPressed:!1,isJustPressed:!1,isJustReleased:!1},{id:"R",codes:["ArrowRight","KeyD"],physicalKeyDown:!1,pressedPrevious:!1,pressedCurrent:!1,isPressed:!1,isJustPressed:!1,isJustReleased:!1},{id:"A",codes:["KeyZ","Period"],physicalKeyDown:!1,pressedPrevious:!1,pressedCurrent:!1,isPressed:!1,isJustPressed:!1,isJustReleased:!1},{id:"B",codes:["KeyX","Slash"],physicalKeyDown:!1,pressedPrevious:!1,pressedCurrent:!1,isPressed:!1,isJustPressed:!1,isJustReleased:!1}],V1=i=>{i.code!=="F1"&&i.code!=="F3"&&i.code!=="F6"&&i.code!=="F7"&&i.code!=="Tab"&&i.code!=="AltLeft"&&i.code!=="AltRight"&&i.code!=="ArrowRight"&&i.code!=="ArrowDown"&&i.code!=="ArrowLeft"&&i.code!=="ArrowUp"||i.preventDefault();const r=I1(i.code);r!=null&&(r.physicalKeyDown=!0)},Q1=i=>{const r=I1(i.code);r!=null&&(r.physicalKeyDown=!1)},I1=i=>{for(let r=0;r<Re.length;r++){const l=Re[r];if(l.codes.includes(i))return l}return null},ue=0,Ue=4096,Ce=4102,l1=4104,c1=4104,He=[];function k(i){if(i<0||i>c1)throw`Invalid address: peek ${i}`;return He[i]}function le(i,r){if(i<0||i>c1)throw`Invalid address: poke ${i}`;He[i]=r}const j1={charWidth:3,charHeight:5,charTrackingDefault:1,charMap:[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,1,0,0,1,0,0,1,0,0,0,0,0,1,0],[1,0,1,1,0,1,0,0,0,0,0,0,0,0,0],[1,0,1,1,1,1,1,0,1,1,1,1,1,0,1],[0,1,0,1,1,1,1,0,0,1,1,1,0,1,0],[1,0,1,0,0,1,0,1,0,1,0,0,1,0,1],[1,1,0,1,1,0,1,1,1,1,0,1,0,1,1],[0,1,0,0,1,0,0,0,0,0,0,0,0,0,0],[0,0,1,0,1,0,0,1,0,0,1,0,0,0,1],[1,0,0,0,1,0,0,1,0,0,1,0,1,0,0],[0,0,0,1,0,1,0,1,0,1,0,1,0,0,0],[0,0,0,0,1,0,1,1,1,0,1,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,1,0,1,0,0],[0,0,0,0,0,0,1,1,1,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,1,0],[0,0,1,0,0,1,0,1,0,1,0,0,1,0,0],[1,1,1,1,0,1,1,0,1,1,0,1,1,1,1],[0,1,0,1,1,0,0,1,0,0,1,0,1,1,1],[1,1,1,0,0,1,1,1,1,1,0,0,1,1,1],[1,1,1,0,0,1,0,1,1,0,0,1,1,1,1],[1,0,1,1,0,1,1,1,1,0,0,1,0,0,1],[1,1,1,1,0,0,1,1,1,0,0,1,1,1,1],[1,1,1,1,0,0,1,1,1,1,0,1,1,1,1],[1,1,1,0,0,1,0,0,1,0,0,1,0,0,1],[1,1,1,1,0,1,1,1,1,1,0,1,1,1,1],[1,1,1,1,0,1,1,1,1,0,0,1,1,1,1],[0,0,0,0,1,0,0,0,0,0,1,0,0,0,0],[0,0,0,0,1,0,0,0,0,0,1,0,1,0,0],[0,0,1,0,1,0,1,0,0,0,1,0,0,0,1],[0,0,0,1,1,1,0,0,0,1,1,1,0,0,0],[1,0,0,0,1,0,0,0,1,0,1,0,1,0,0],[1,1,1,0,0,1,0,1,0,0,0,0,0,1,0],[1,1,1,1,0,1,1,0,1,1,0,0,1,1,1],[1,1,1,1,0,1,1,1,1,1,0,1,1,0,1],[1,1,1,1,0,1,1,1,0,1,0,1,1,1,1],[1,1,1,1,0,0,1,0,0,1,0,0,1,1,1],[1,1,0,1,0,1,1,0,1,1,0,1,1,1,0],[1,1,1,1,0,0,1,1,0,1,0,0,1,1,1],[1,1,1,1,0,0,1,1,0,1,0,0,1,0,0],[1,1,1,1,0,0,1,0,1,1,0,1,1,1,1],[1,0,1,1,0,1,1,1,1,1,0,1,1,0,1],[1,1,1,0,1,0,0,1,0,0,1,0,1,1,1],[0,0,1,0,0,1,0,0,1,1,0,1,1,1,1],[1,0,1,1,0,1,1,1,0,1,0,1,1,0,1],[1,0,0,1,0,0,1,0,0,1,0,0,1,1,1],[1,0,1,1,1,1,1,0,1,1,0,1,1,0,1],[1,0,1,1,1,1,1,1,1,1,0,1,1,0,1],[1,1,1,1,0,1,1,0,1,1,0,1,1,1,1],[1,1,1,1,0,1,1,1,1,1,0,0,1,0,0],[1,1,1,1,0,1,1,0,1,1,1,1,0,0,1],[1,1,1,1,0,1,1,1,0,1,0,1,1,0,1],[1,1,1,1,0,0,1,1,1,0,0,1,1,1,1],[1,1,1,0,1,0,0,1,0,0,1,0,0,1,0],[1,0,1,1,0,1,1,0,1,1,0,1,1,1,1],[1,0,1,1,0,1,1,0,1,1,0,1,0,1,0],[1,0,1,1,0,1,1,0,1,1,1,1,1,0,1],[1,0,1,1,0,1,0,1,0,1,0,1,1,0,1],[1,0,1,1,0,1,0,1,0,0,1,0,0,1,0],[1,1,1,0,0,1,0,1,0,1,0,0,1,1,1],[0,1,1,0,1,0,0,1,0,0,1,0,0,1,1],[1,0,0,1,0,0,0,1,0,0,0,1,0,0,1],[1,1,0,0,1,0,0,1,0,0,1,0,1,1,0],[0,1,0,1,0,1,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,1,1,1],[1,0,0,0,1,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,1,1,1,1,1,1,1,1],[0,0,0,1,0,0,1,1,1,1,0,1,1,1,1],[0,0,0,0,0,0,1,1,1,1,0,0,1,1,1],[0,0,0,0,0,1,1,1,1,1,0,1,1,1,1],[0,0,0,0,0,0,1,1,0,1,1,0,1,1,1],[0,0,0,0,1,1,0,1,0,1,1,1,0,1,0],[0,0,0,1,1,1,1,1,1,0,0,1,1,1,1],[0,0,0,1,0,0,1,1,1,1,0,1,1,0,1],[0,0,0,0,1,0,0,0,0,0,1,0,0,1,0],[0,0,0,0,1,0,0,0,0,0,1,0,1,1,0],[0,0,0,1,0,0,1,0,1,1,1,0,1,0,1],[0,0,0,0,1,0,0,1,0,0,1,0,0,1,1],[0,0,0,0,0,0,1,1,1,1,1,1,1,0,1],[0,0,0,0,0,0,1,1,1,1,0,1,1,0,1],[0,0,0,0,0,0,1,1,1,1,0,1,1,1,1],[0,0,0,1,1,1,1,0,1,1,1,1,1,0,0],[0,0,0,1,1,1,1,0,1,1,1,1,0,0,1],[0,0,0,0,0,0,1,1,1,1,0,0,1,0,0],[0,0,0,0,0,0,0,1,1,0,1,0,1,1,0],[0,0,0,0,1,0,1,1,1,0,1,0,0,1,1],[0,0,0,0,0,0,1,0,1,1,0,1,1,1,1],[0,0,0,0,0,0,1,0,1,1,0,1,0,1,0],[0,0,0,0,0,0,1,0,1,1,1,1,1,1,1],[0,0,0,0,0,0,1,0,1,0,1,0,1,0,1],[0,0,0,1,0,1,1,1,1,0,0,1,1,1,0],[0,0,0,1,1,1,0,1,0,0,0,1,1,1,0],[0,1,1,0,1,0,1,0,0,0,1,0,0,1,1],[0,1,0,0,1,0,0,1,0,0,1,0,0,1,0],[1,1,0,0,1,0,0,0,1,0,1,0,1,1,0],[0,0,0,0,0,0,0,1,1,1,1,0,0,0,0]]};function a1(i,r,l,t,o){i===l?function(c,x,C,a){if(x>C){const u=x;x=C,C=u}for(let u=x;u<=C;u++)M(c,u,a)}(i,r,t,o):r===t?Fe(i,l,r,o):function(c,x,C,a,u){const P=Math.abs(C-c),A=Math.abs(a-x),ee=c<C?1:-1,he=x<a?1:-1;let Pe=P-A;for(M(c,x,u),M(C,a,u);c!==C||x!==a;){const be=Pe<<1;be>-A&&(Pe-=A,c+=ee),be<P&&(Pe+=P,x+=he),M(c,x,u)}}(i,r,l,t,o)}function Fe(i,r,l,t){if(i>r){const o=i;i=r,r=o}for(let o=i;o<=r;o++)M(o,l,t)}function M(i,r,l){i<0||i>=S||r<0||r>=q||le(ue+(0|i)+(0|r)*S,l)}function q1(i,r,l,t,o){const c=r.charMap[i.charCodeAt(0)-32];for(let x=0;x<r.charWidth;x++)for(let C=0;C<r.charHeight;C++)c[x+C*r.charWidth]===1&&M(l+x,t+C,o)}let oe,ce,Ie,Ve;const Qe=[60,60,60,60,60],je=72,qe=128,E1=4,m1=4;function v1(i){const r=i-Ve;if(Math.ceil(r)>1e3/60){Qe.shift(),Qe.push(Math.round(1e3/r));const l=Math.round(Qe.reduce((t,o)=>t+o)/Qe.length);Ve=i,le(l1,l),function(){for(const t of Re)t.pressedPrevious=t.pressedCurrent,t.pressedCurrent=t.physicalKeyDown,t.isPressed=t.pressedCurrent,t.isJustPressed=t.pressedCurrent&&!t.pressedPrevious,t.isJustReleased=!t.pressedCurrent&&t.pressedPrevious}(),function(){const t=navigator.getGamepads()[0];if(t)for(const o of Oe){const c=U1(t,o.index);c!=null&&(c.pressed?o.physicalButtonPressed=!0:o.physicalButtonPressed=!1)}for(const o of Oe)o.pressedPrevious=o.pressedCurrent,o.pressedCurrent=o.physicalButtonPressed,o.isPressed=o.pressedCurrent,o.isJustPressed=o.pressedCurrent&&!o.pressedPrevious,o.isJustReleased=!o.pressedCurrent&&o.pressedPrevious}(),function(){for(const t of we)t.pressedPrevious=t.pressedCurrent,t.pressedCurrent=F1(xe,t.id),t.isPressed=t.pressedCurrent,t.isJustPressed=t.pressedCurrent&&!t.pressedPrevious,t.isJustReleased=!t.pressedCurrent&&t.pressedPrevious}(),function(){for(let t=0;t<6;t++){let o=0;(Re[t].isPressed||Oe[t].isPressed||we[t].isPressed)&&(o|=h),(Re[t].isJustPressed||Oe[t].isJustPressed||we[t].isJustPressed)&&(o|=E),(Re[t].isJustReleased||Oe[t].isJustReleased||we[t].isJustReleased)&&(o|=ye),le(Ue+t,o)}}(),function(){const t=k(Ce),o=k(Ce+1);t>0&&o>0?function(c){n.frequency.value=c}(t):d(),o>0&&le(Ce+1,o-1)}(),romLoop(),function(){for(let t=ue;t<ue+S*q;t++){const o=Te[k(t)];Ie.data[4*t+0]=o.r,Ie.data[4*t+1]=o.g,Ie.data[4*t+2]=o.b,Ie.data[4*t+3]=255}ce.putImageData(Ie,E1,m1)}()}window.requestAnimationFrame(v1)}window.addEventListener("load",function(){(function(){He.length=0;for(let i=0;i<=c1;i++)He.push(0)})(),s=new window.AudioContext,n=s.createOscillator(),n.type="square",n.frequency.value=0,n.connect(s.destination),n.start(0),window.addEventListener("mousedown",y),window.addEventListener("touchstart",y),window.addEventListener("keydown",y),document.addEventListener("visibilitychange",()=>{document.visibilityState==="hidden"&&d()}),document.addEventListener("keydown",V1),document.addEventListener("keyup",Q1),function(){const i="-webkit-touch-callout: none; -webkit-tap-highlight-color: #000; -webkit-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none; background: #000; color: #888;",r="position: absolute; left: 50%; top: 50%; transform: translate(-50%, -50%); background: #000};",l="image-rendering: -moz-crisp-edges; image-rendering: -webkit-optimize-contrast; image-rendering: -o-crisp-edges; image-rendering: pixelated;";document.body.style.cssText=i,oe=document.createElement("canvas"),oe.width=je,oe.height=qe,ce=oe.getContext("2d",{alpha:!1}),ce.imageSmoothingEnabled=!1,oe.style.cssText=r+l,ce.fillStyle="#ddd",ce.fillRect(0,0,je,qe),ce.fillStyle="#333",ce.fillRect(E1-1,m1-1,S+2,q+2);const t=()=>{const o=innerWidth/innerHeight,c=je/qe,x=o<c,C=x?innerWidth:innerHeight*c,a=x?innerWidth/c:innerHeight;oe.style.width=`${C}px`,oe.style.height=`${a}px`};window.addEventListener("resize",t),t(),document.body.appendChild(oe),Ie=ce.createImageData(S,q)}(),window.addEventListener("gamepaddisconnected",J1),function(i,r,l){Be=i,A1=r,N1=l;const t=Be.getContext("2d");t.fillRect(13,78,9,29),t.fillRect(3,88,29,9);const o=new Image;o.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABcAAAAFAQMAAACU+uVzAAAABlBMVEUAAAAzM2bT8ENbAAAAAXRSTlMAQObYZgAAABtJREFUCNdjePdKj6GjS4PhxDsgvWgRQ9+jdwBZWAlP4hlWSwAAAABJRU5ErkJggg==",o.onload=()=>{t.drawImage(o,6,71)};const c=new Image;c.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMAQMAAABsu86kAAAABlBMVEUAAACZADPodVumAAAAAXRSTlMAQObYZgAAABxJREFUCNdj4GdgsD/AUP8AhP5/gCOICFAKqAAAEwUPVSVDKX4AAAAASUVORK5CYII=",c.onload=()=>{t.drawImage(c,42,88),t.drawImage(c,57,79)};const x=new Image;x.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAAFAQMAAABYY9+YAAAABlBMVEUAAAAzM2bT8ENbAAAAAXRSTlMAQObYZgAAABFJREFUCNdjSGCYwPABiCcAAA5KAwFW2JXuAAAAAElFTkSuQmCC",x.onload=()=>{t.drawImage(x,46,101)};const C=new Image;C.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAAFAQMAAABYY9+YAAAABlBMVEUAAAAzM2bT8ENbAAAAAXRSTlMAQObYZgAAAA1JREFUCNdjeMAwAYIBEsoDwUh7niQAAAAASUVORK5CYII=",C.onload=()=>{t.drawImage(C,61,92)},document.addEventListener("mousedown",b1),document.addEventListener("mousemove",X1),document.addEventListener("mouseup",W1),document.addEventListener("touchstart",K1),document.addEventListener("touchmove",S1,{passive:!1}),document.addEventListener("touchend",H1,{passive:!1})}(oe,je,qe),romInit(),function(i){for(let r=0;r<=7;r++){const l=i[r],t=(16711680&l)>>16,o=(65280&l)>>8,c=255&l;Te.push({r:t,g:o,b:c})}}(window.romPalette),Ve=performance.now(),v1(Ve)}),window.romPalette=[0,255,16711680,16711935,65280,65535,16776960,16777215],e.ADDRESS_AUD=Ce,e.ADDRESS_BTN=Ue,e.ADDRESS_FPS=l1,e.ADDRESS_GFX=ue,e.Anim=class{constructor(i,r,l){this.frames=i,this.frameTicks=r,this.looping=l}getKeyFrame(i){if(this.frames.length===1)return this.frames[0];let r=Math.floor(i/this.frameTicks);return this.looping?r%=this.frames.length:r=Math.min(this.frames.length-1,r),this.frames[r]}isFinished(i){return!this.looping&&i>=this.frames.length*this.frameTicks}},e.BTN_A=4,e.BTN_B=5,e.BTN_D=1,e.BTN_L=2,e.BTN_R=3,e.BTN_U=0,e.COL_BLK=0,e.COL_BLU=1,e.COL_CYN=5,e.COL_GRN=4,e.COL_MAG=3,e.COL_RED=2,e.COL_WHT=7,e.COL_YEL=6,e.GFX_H=q,e.GFX_W=S,e.Rect=class{constructor(i,r,l,t){this.x=i,this.y=r,this.width=l,this.height=t}overlaps(i){return this.x<i.x+i.width&&this.x+this.width>i.x&&this.y<i.y+i.height&&this.y+this.height>i.y}},e.Vec2=class{constructor(i,r){this.x=i,this.y=r}set(i,r){this.x=i,this.y=r}add(i,r){this.x+=i,this.y+=r}scl(i){this.x*=i,this.y*=i}equals(i){return this.x==i.x&&this.y==i.y}},e.beep=function(i,r,l){(k(Ce+1)<=0||l)&&(le(Ce,Math.floor(i)),le(Ce+1,Math.floor(r)))},e.clamp=function(i,r,l){return Math.max(r,Math.min(i,l))},e.clearGfx=function(i){for(let r=ue;r<ue+S*q;r++)le(r,i>0?i:0)},e.drawCircle=function(i,r,l,t,o){o>=0&&function(c,x,C,a){let u=0,P=C,A=1-C;for(;u<=P;)Fe(c-u,c+u,x-P,a),Fe(c-P,c+P,x-u,a),Fe(c-P,c+P,x+u,a),Fe(c-u,c+u,x+P,a),A<0?A+=2*u+1:(A+=2*(u-P)+1,P--),u++}(i,r,l,o),function(c,x,C,a){let u=0,P=C,A=1-C;for(;u<=P;)M(c+u,x+P,a),M(c+u,x-P,a),M(c-u,x+P,a),M(c-u,x-P,a),M(c+P,x+u,a),M(c+P,x-u,a),M(c-P,x+u,a),M(c-P,x-u,a),A<0?A+=2*u+1:(A+=2*(u-P)+1,P--),u++}(i,r,l,t)},e.drawImage=function(i,r,l,t,o,c){const x=[...o];if(c){const C=[];for(;x.length;)C.push(x.splice(0,l));if(c.flipX)for(let a=0;a<t;a++)C[a].reverse();c.flipY&&C.reverse();for(let a=0;a<t;a++)for(let u=0;u<l;u++)x[a*l+u]=C[a][u]}for(let C=0;C<t;C++)for(let a=0;a<l;a++){const u=x[a+C*l];u>=0&&M(i+a,r+C,u)}},e.drawLine=a1,e.drawPattern=function(i,r,l,t){for(let o=0;o<l.length;o+=2)M(i+l[o],r+l[o+1],t)},e.drawPixel=M,e.drawPolygon=function(i,r,l){l&&function(t,o,c){let x=q,C=0;for(const a of t)x=Math.min(x,a.y),C=Math.max(C,a.y);for(let a=x;a<=C;a++){let u=[];for(let P=0;P<t.length;P++){const A=t[P],ee=t[(P+1)%t.length];if(A.y<a&&ee.y>=a||ee.y<a&&A.y>=a){const he=(a-A.y)*(ee.x-A.x)/(ee.y-A.y)+A.x;u.push(he)}else A.y===a&&ee.y===a&&(u.push(A.x),u.push(ee.x))}u=u.sort((P,A)=>P-A);for(let P=0;P<u.length;P+=2){const A=Math.ceil(u[P]),ee=Math.floor(u[P+1]);let he=!1;for(let Pe=0,be=t.length-1;Pe<t.length;be=Pe++){const Xe=t[Pe],y1=t[be];Xe.y>a!=y1.y>a&&A<(y1.x-Xe.x)*(a-Xe.y)/(y1.y-Xe.y)+Xe.x&&(he=!he)}he&&a1(A,a,ee,a,c)}}}(i,0,l),function(t,o){for(let c=0;c<t.length;c++){const x=t[c],C=t[(c+1)%t.length];a1(x.x,x.y,C.x,C.y,o)}}(i,r)},e.drawRectangle=function(i,r,l,t,o,c){let x=0,C=0,a=0,u=0;l<0?(x=i+l+1,a=i):(x=i,a=i+l-1),t<0?(C=r+t+1,u=r):(C=r,u=r+t-1);for(let P=x;P<=a;P++)for(let A=C;A<=u;A++)P===x||P===a||A===C||A===u?M(P,A,o):c>=0&&M(P,A,c)},e.drawText=function(i,r,l,t,o){const c=o!=null&&o.font?o.font:j1,x=(o==null?void 0:o.tracking)>=0?o.tracking:c.charTrackingDefault;let C=i;for(let a=0;a<l.length;a++)q1(l.charAt(a),c,C,r,t),C+=c.charWidth+x},e.fc64Init=function(i,r,l){window.romInit=i,window.romLoop=r,l&&(window.romPalette=l)},e.getFps=function(){return k(l1)},e.getPixel=function(i,r){return i<0||i>=S||r<0||r>=q?-1:k(ue+(0|i)+(0|r)*S)},e.isEmptyObject=function(i){return Object.keys(i).length===0&&i.constructor===Object},e.isJustPressed=function(i){return!!(k(Ue+i)&E)},e.isJustReleased=function(i){return!!(k(Ue+i)&ye)},e.isPressed=function(i){return!!(k(Ue+i)&h)},e.peek=k,e.poke=le,e.randomInt=function(i,r){return Math.floor(Math.random()*(r-i+1)+i)},e.swapImageColors=function(i,r,l){if(r.length!=l.length)throw new Error("mismatched old/new list lengths");const t=[...i];for(let o=0;o<r.length;o++)for(let c=0;c<i.length;c++)i[c]===r[o]&&(t[c]=l[o]);return t},e.wrap=function(i,r,l){const t=l-r;return r+((i-r)%t+t)%t}})(window||{});let ne,Ke;function Z1(){ne===void 0&&(ne=0),Ke=Object.values(_1),Ke.shift()}function z1(e){isJustPressed(BTN_L)&&ne>0&&ne--,isJustPressed(BTN_R)&&ne<Ke.length-1&&ne++,isJustPressed(BTN_A)&&g1(Ke[ne]),clearGfx(),m(1,"COLLISION",COL_WHT),m(7,"DETECTION",COL_WHT),m(13,"DEMOS",COL_WHT),ne>0&&e%40>10&&drawText(1,32,"<",COL_WHT),m(32,Ke[ne],COL_YEL),ne<Object.keys(_1).length-2&&e%40>10&&drawText(59,32,">",COL_WHT),m(52,"A:SELECT",COL_WHT),m(58,"B:RETURN",COL_WHT)}const $e=(e,s,n,d)=>Math.sqrt(k1(e,s,n,d)),k1=(e,s,n,d)=>(e-n)*(e-n)+(s-d)*(s-d),Y1=(e,s)=>e.x===s.x&&e.y===s.y,r1=(e,s,n)=>{const d=$e(e.x,e.y,s.x1,s.y1),y=$e(e.x,e.y,s.x2,s.y2),h=$e(s.x1,s.y1,s.x2,s.y2),E=n||.1;return d+y>=h-E&&d+y<=h+E},Se=(e,s)=>{const n=e.x-s.x,d=e.y-s.y,y=L1(s.radius);return n*n+d*d<=y*y},n1=(e,s)=>e.x>=s.x&&e.x<s.x+s.width&&e.y>=s.y&&e.y<s.y+s.height,Ne=(e,s)=>{let n=!1,d=0;for(let y=0;y<s.vertices.length;y++){d=y+1,d===s.vertices.length&&(d=0);const h=s.vertices[y],E=s.vertices[d];(h.y>=e.y&&E.y<e.y||h.y<e.y&&E.y>=e.y)&&e.x<(E.x-h.x)*(e.y-h.y)/(E.y-h.y)+h.x&&(n=!n)}return n},es=(e,s,n)=>r1(s,e,n),Ae=(e,s)=>{const n=((s.x2-s.x1)*(e.y1-s.y1)-(s.y2-s.y1)*(e.x1-s.x1))/((s.y2-s.y1)*(e.x2-e.x1)-(s.x2-s.x1)*(e.y2-e.y1)),d=((e.x2-e.x1)*(e.y1-s.y1)-(e.y2-e.y1)*(e.x1-s.x1))/((s.y2-s.y1)*(e.x2-e.x1)-(s.x2-s.x1)*(e.y2-e.y1));return n>=0&&n<=1&&d>=0&&d<=1},d1=(e,s)=>{const n=Se({x:e.x1,y:e.y1},s),d=Se({x:e.x2,y:e.y2},s);if(n||d)return!0;const y=$e(e.x1,e.y1,e.x2,e.y2),h=((s.x-e.x1)*(e.x2-e.x1)+(s.y-e.y1)*(e.y2-e.y1))/(y*y),E=e.x1+h*(e.x2-e.x1),ye=e.y1+h*(e.y2-e.y1);return r1({x:E,y:ye},e)?$e(E,ye,s.x,s.y)<=L1(s.radius):!1},o1=(e,s)=>{if(n1({x:e.x1,y:e.y1},s))return!0;const n=Ae(e,{x1:s.x,y1:s.y,x2:s.x,y2:s.y+s.height}),d=Ae(e,{x1:s.x+s.width,y1:s.y,x2:s.x+s.width,y2:s.y+s.height}),y=Ae(e,{x1:s.x,y1:s.y,x2:s.x+s.width,y2:s.y}),h=Ae(e,{x1:s.x,y1:s.y+s.height,x2:s.x+s.width,y2:s.y+s.height});return n||d||y||h},f1=(e,s)=>{let n=0;for(let d=0;d<s.vertices.length;d++){n=d+1,n===s.vertices.length&&(n=0);const y=s.vertices[d],h=s.vertices[n];if(Ae({x1:y.x,y1:y.y,x2:h.x,y2:h.y},e))return!0}return!!Ne({x:e.x1,y:e.y1},s)},ss=(e,s)=>Se(s,e),is=(e,s)=>d1(s,e),M1=(e,s)=>{const n=e.x-s.x,d=e.y-s.y,y=e.radius+s.radius;return n*n+d*d<=y*y},C1=(e,s)=>{let n=e.x,d=e.y;e.x<s.x?n=s.x:e.x>s.x+s.width-1&&(n=s.x+s.width-1),e.y<s.y?d=s.y:e.y>s.y+s.height-1&&(d=s.y+s.height-1);const y=e.x-n,h=e.y-d,E=L1(e.radius);return y*y+h*h<=E*E},h1=(e,s)=>{let n=0;for(let d=0;d<s.vertices.length;d++){n=d+1,n===s.vertices.length&&(n=0);const y=s.vertices[d],h=s.vertices[n];if(d1({x1:y.x,y1:y.y,x2:h.x,y2:h.y},e))return!0}return!!Ne({x:e.x,y:e.y},s)},ts=(e,s)=>n1(s,e),rs=(e,s)=>o1(s,e),ns=(e,s)=>C1(s,e),D1=(e,s)=>e.x+e.width>s.x&&e.x<s.x+s.width&&e.y+e.height>s.y&&e.y<s.y+s.height,P1=(e,s)=>{let n=0;for(let d=0;d<s.vertices.length;d++){n=d+1,n===s.vertices.length&&(n=0);const y=s.vertices[d],h=s.vertices[n];if(o1({x1:y.x,y1:y.y,x2:h.x,y2:h.y},e))return!0}return!!Ne({x:e.x,y:e.y},s)},ds=(e,s)=>Ne(s,e),os=(e,s)=>f1(s,e),fs=(e,s)=>h1(s,e),ls=(e,s)=>P1(s,e),$1=(e,s)=>{let n=0;for(let d=0;d<e.vertices.length;d++){n=d+1,n===e.vertices.length&&(n=0);const y=e.vertices[d],h=e.vertices[n];if(f1({x1:y.x,y1:y.y,x2:h.x,y2:h.y},s))return!0}return!!Ne({x:s.vertices[0].x,y:s.vertices[0].y},e)},L1=e=>{let s=1.02;return e<=30&&(s=1.0226),e<=29&&(s=1.0253),e<=28&&(s=1.0302),e<=27&&(s=1.0298),e<=26&&(s=1.0242),e<=25&&(s=1.0253),e<=24&&(s=1.0291),e<=23&&(s=1.0308),e<=22&&(s=1.0306),e<=21&&(s=1.0302),e<=20&&(s=1.0405),e<=19&&(s=1.0448),e<=18&&(s=1.0483),e<=17&&(s=1.0407),e<=16&&(s=1.0346),e<=15&&(s=1.0435),e<=14&&(s=1.0401),e<=13&&(s=1.0687),e<=12&&(s=1.0672),e<=11&&(s=1.0641),e<=10&&(s=1.0631),e<=9&&(s=1.0541),e<=8&&(s=1.0753),e<=7&&(s=1.1158),e<=6&&(s=1.1181),e<=5&&(s=1.1314),e<=4&&(s=1.1181),e<=3&&(s=1.2019),e<=2&&(s=1.1181),e*s},G=20,p=44,j=5,N=10,Ze=8,Ee=["POINT","LINE","CIRCLE","RECT","POLY"];let L,_,z,f,de=[];function cs(){L=_=0,x1()}function as(e){e>300&&(L++,L===Ee.length&&(L=0,_=wrap(_+1,0,Ee.length)),x1()),(isJustPressed(BTN_U)||isJustPressed(BTN_D)||isJustPressed(BTN_L)||isJustPressed(BTN_R))&&(L=wrap(L+(isJustPressed(BTN_U)?1:isJustPressed(BTN_D)?-1:0),0,Ee.length),_=wrap(_+(isJustPressed(BTN_L)?-1:isJustPressed(BTN_R)?1:0),0,Ee.length),x1());const s=[];for(let d=0;d<de.length;d+=2){if(z[d]!=de[d]||z[d+1]!=de[d+1]){const y=ys(z[d],z[d+1],de[d],de[d+1],.5);z[d]=y.x,z[d+1]=y.y}else de[d]=randomInt(G,p),de[d+1]=randomInt(G,p);s.push({x:Math.round(z[d]),y:Math.round(z[d+1])})}const n=xs(s);clearGfx(n?COL_BLU:COL_BLK),m(1,`DYNAMIC ${Ee[L]}`,COL_WHT),m(58,`STATIC ${Ee[_]}`,COL_WHT),us(s,n?COL_RED:COL_GRN)}const x1=()=>{Vs(),(_===0||_===2||_===4)&&(f=[randomInt(G,p),randomInt(G,p)]),_===1&&(f=[randomInt(G,p),randomInt(G,p),randomInt(G,p),randomInt(G,p)]),_===3&&(f=[randomInt(G,p)-N/2,randomInt(G,p)-N/2]),(L===0||L===2||L===4)&&(z=[randomInt(G,p),randomInt(G,p)],de=[f[0],f[1]]),L===1&&(z=[randomInt(G,p),randomInt(G,p),randomInt(G,p),randomInt(G,p)],de=[f[0],f[1],randomInt(G,p),randomInt(G,p)]),L===3&&(z=[randomInt(G,p)-N/2,randomInt(G,p)-N/2],de=[f[0],f[1]])},ys=(e,s,n,d,y)=>{const h=$e(e,s,n,d);if(h>y){const E=y/h;return{x:e+(n-e)*E,y:s+(d-s)*E}}return{x:n,y:d}},xs=e=>{if(L===0&&_===0)return Y1(e[0],{x:f[0],y:f[1]});if(L===0&&_===1)return r1(e[0],{x1:f[0],y1:f[1],x2:f[2],y2:f[3]});if(L===0&&_===2)return Se(e[0],{x:f[0],y:f[1],radius:j});if(L===0&&_===3)return n1(e[0],{x:f[0],y:f[1],width:N,height:N});if(L===0&&_===4)return Ne(e[0],se(f[0],f[1]));if(L===1&&_===0)return es({x1:e[0].x,y1:e[0].y,x2:e[1].x,y2:e[1].y},{x:f[0],y:f[1]});if(L===1&&_===1)return Ae({x1:e[0].x,y1:e[0].y,x2:e[1].x,y2:e[1].y},{x1:f[0],y1:f[1],x2:f[2],y2:f[3]});if(L===1&&_===2)return d1({x1:e[0].x,y1:e[0].y,x2:e[1].x,y2:e[1].y},{x:f[0],y:f[1],radius:j});if(L===1&&_===3)return o1({x1:e[0].x,y1:e[0].y,x2:e[1].x,y2:e[1].y},{x:f[0],y:f[1],width:N,height:N});if(L===1&&_===4)return f1({x1:e[0].x,y1:e[0].y,x2:e[1].x,y2:e[1].y},se(f[0],f[1]));if(L===2&&_===0)return ss({x:e[0].x,y:e[0].y,radius:j},{x:f[0],y:f[1]});if(L===2&&_===1)return is({x:e[0].x,y:e[0].y,radius:j},{x1:f[0],y1:f[1],x2:f[2],y2:f[3]});if(L===2&&_===2)return M1({x:e[0].x,y:e[0].y,radius:j},{x:f[0],y:f[1],radius:j});if(L===2&&_===3)return C1({x:e[0].x,y:e[0].y,radius:j},{x:f[0],y:f[1],width:N,height:N});if(L===2&&_===4)return h1({x:e[0].x,y:e[0].y,radius:j},se(f[0],f[1]));if(L===3&&_===0)return ts({x:e[0].x,y:e[0].y,width:N,height:N},{x:f[0],y:f[1]});if(L===3&&_===1)return rs({x:e[0].x,y:e[0].y,width:N,height:N},{x1:f[0],y1:f[1],x2:f[2],y2:f[3]});if(L===3&&_===2)return ns({x:e[0].x,y:e[0].y,width:N,height:N},{x:f[0],y:f[1],radius:j});if(L===3&&_===3)return D1({x:e[0].x,y:e[0].y,width:N,height:N},{x:f[0],y:f[1],width:N,height:N});if(L===3&&_===4)return P1({x:e[0].x,y:e[0].y,width:N,height:N},se(f[0],f[1]));if(L===4&&_===0)return ds(se(e[0].x,e[0].y),{x:f[0],y:f[1]});if(L===4&&_===1)return os(se(e[0].x,e[0].y),{x1:f[0],y1:f[1],x2:f[2],y2:f[3]});if(L===4&&_===2)return fs(se(e[0].x,e[0].y),{x:f[0],y:f[1],radius:j});if(L===4&&_===3)return ls(se(e[0].x,e[0].y),{x:f[0],y:f[1],width:N,height:N});if(L===4&&_===4)return $1(se(e[0].x,e[0].y),se(f[0],f[1]))},us=(e,s)=>{L===0&&drawPixel(e[0].x,e[0].y,s),L===1&&drawLine(e[0].x,e[0].y,e[1].x,e[1].y,s),L===2&&drawCircle(e[0].x,e[0].y,j,s,s),L===3&&drawRectangle(e[0].x,e[0].y,N,N,s,s),L===4&&drawPolygon(u1(e[0].x,e[0].y),s,s),_===0&&drawPixel(f[0],f[1],s),_===1&&drawLine(f[0],f[1],f[2],f[3],s),_===2&&drawCircle(f[0],f[1],j,s,s),_===3&&drawRectangle(f[0],f[1],N,N,s,s),_===4&&drawPolygon(u1(f[0],f[1]),s,s)},se=(e,s)=>({vertices:u1(e,s).map(({x:n,y:d})=>({x:n,y:d}))}),u1=(e,s)=>[{x:e,y:s-Ze},{x:e+Ze,y:s},{x:e,y:s+Ze},{x:e-Ze,y:s}];let b,ae;function Cs(){b={x:30,y:30},ae={x:32,y:32}}function hs(e){e%5===0&&(isPressed(BTN_A)&&(ae.x=randomInt(16,48),ae.y=randomInt(16,48),b.x=ae.x-2,b.y=ae.y-2),isPressed(BTN_U)&&b.y>0&&b.y--,isPressed(BTN_D)&&b.y<GFX_H-1&&b.y++,isPressed(BTN_L)&&b.x>0&&b.x--,isPressed(BTN_R)&&b.x<GFX_W-1&&b.x++);const s=Y1(b,ae);clearGfx(s?COL_YEL:COL_BLK),drawPixel(ae.x,ae.y,COL_CYN),drawPixel(b.x,b.y,F(e,10)),m(1,"POINT-POINT",COL_RED)}let X,D;function Ps(){X={x:30,y:30},D={x1:16,y1:48,x2:48,y2:16}}function Ls(e){if(e%5===0)if(isPressed(BTN_A)){D.x1=randomInt(10,54),D.y1=randomInt(10,54),D.x2=randomInt(10,54),D.y2=randomInt(10,54);const n=(D.y1-D.y2)/(D.x1-D.x2);X.x=(D.x1+D.x2)/2+(n>0?4:-4),X.y=(D.y1+D.y2)/2-4}else isPressed(BTN_U)&&X.y>0&&X.y--,isPressed(BTN_D)&&X.y<GFX_H-1&&X.y++,isPressed(BTN_L)&&X.x>0&&X.x--,isPressed(BTN_R)&&X.x<GFX_W-1&&X.x++;const s=r1(X,D);clearGfx(s?COL_YEL:COL_BLK),drawLine(D.x1,D.y1,D.x2,D.y2,s?COL_MAG:COL_CYN),drawPixel(X.x,X.y,F(e,10)),m(1,"POINT-LINE",COL_RED)}let H,fe;function _s(){H={x:21,y:21},fe={x:32,y:32,radius:11}}function gs(e){e%5===0&&(isPressed(BTN_A)?((isPressed(BTN_U)||isPressed(BTN_R))&&fe.radius<30&&fe.radius++,(isPressed(BTN_D)||isPressed(BTN_L))&&fe.radius>0&&fe.radius--):(isPressed(BTN_U)&&H.y>0&&H.y--,isPressed(BTN_D)&&H.y<GFX_H-1&&H.y++,isPressed(BTN_L)&&H.x>0&&H.x--,isPressed(BTN_R)&&H.x<GFX_W-1&&H.x++));const s=Se(H,fe);clearGfx(s?COL_YEL:COL_BLK),drawCircle(fe.x,fe.y,fe.radius,s?COL_MAG:COL_CYN,s?COL_MAG:COL_CYN),drawPixel(H.x,H.y,F(e,10)),m(1,"POINT-CIRCLE",COL_RED)}let W,K;function As(){W={x:14,y:14},K={x:16,y:16,width:32,height:32}}function Ns(e){e%5===0&&(isPressed(BTN_A)?(K.width=randomInt(1,60),K.height=randomInt(1,60),K.x=32-K.width/2,K.y=32-K.height/2,W.x=K.x-2,W.y=K.y-2):(isPressed(BTN_U)&&W.y>0&&W.y--,isPressed(BTN_D)&&W.y<GFX_H-1&&W.y++,isPressed(BTN_L)&&W.x>0&&W.x--,isPressed(BTN_R)&&W.x<GFX_W-1&&W.x++));const s=n1(W,K);clearGfx(s?COL_YEL:COL_BLK),drawRectangle(K.x,K.y,K.width,K.height,s?COL_MAG:COL_CYN,s?COL_MAG:COL_CYN),drawPixel(W.x,W.y,F(e,10)),m(1,"POINT-RECT",COL_RED)}const Je=(e,s,n,d,y)=>{const h=[],E=Math.random()*Math.PI*2,ye=Math.PI*2/y;for(let Te=0;Te<y;Te++){const S=E+Te*ye,q=randomInt(n,d);h.push({x:Math.round(Math.cos(S)*q+e),y:Math.round(Math.sin(S)*q+s)})}return h};let V,me,ke;function Ts(){V={x:16,y:16},me=3,ke={vertices:[{x:36,y:12},{x:14,y:50},{x:52,y:46}]}}function Os(e){e%5===0&&(isPressed(BTN_A)?((isPressed(BTN_U)||isPressed(BTN_R))&&me<12&&me++,(isPressed(BTN_D)||isPressed(BTN_L))&&me>3&&me--,ke.vertices=Je(32,32,10,25,me)):(isPressed(BTN_U)&&V.y>0&&V.y--,isPressed(BTN_D)&&V.y<GFX_H-1&&V.y++,isPressed(BTN_L)&&V.x>0&&V.x--,isPressed(BTN_R)&&V.x<GFX_W-1&&V.x++));const s=Ne(V,ke);clearGfx(s?COL_YEL:COL_BLK),drawPolygon(ke.vertices,s?COL_MAG:COL_CYN,s?COL_MAG:COL_CYN),drawPixel(V.x,V.y,F(e,10)),m(1,"POINT-POLY",COL_RED)}let T,O,Z;function ws(){T={x1:4,y1:8,x2:38,y2:28},O={x1:14,y1:56,x2:56,y2:24},Z=1}function Bs(e){e%5===0&&(isPressed(BTN_A)?Z=wrap(Z+1,1,5):(Z===1&&(isPressed(BTN_U)&&T.y1>0&&T.y1--,isPressed(BTN_D)&&T.y1<GFX_H-1&&T.y1++,isPressed(BTN_L)&&T.x1>0&&T.x1--,isPressed(BTN_R)&&T.x1<GFX_W-1&&T.x1++),Z===2&&(isPressed(BTN_U)&&T.y2>0&&T.y2--,isPressed(BTN_D)&&T.y2<GFX_H-1&&T.y2++,isPressed(BTN_L)&&T.x2>0&&T.x2--,isPressed(BTN_R)&&T.x2<GFX_W-1&&T.x2++),Z===3&&(isPressed(BTN_U)&&O.y1>0&&O.y1--,isPressed(BTN_D)&&O.y1<GFX_H-1&&O.y1++,isPressed(BTN_L)&&O.x1>0&&O.x1--,isPressed(BTN_R)&&O.x1<GFX_W-1&&O.x1++),Z===4&&(isPressed(BTN_U)&&O.y2>0&&O.y2--,isPressed(BTN_D)&&O.y2<GFX_H-1&&O.y2++,isPressed(BTN_L)&&O.x2>0&&O.x2--,isPressed(BTN_R)&&O.x2<GFX_W-1&&O.x2++)));const s=Ae(T,O);clearGfx(s?COL_YEL:COL_BLK),drawLine(O.x1,O.y1,O.x2,O.y2,s?COL_MAG:COL_CYN),drawLine(T.x1,T.y1,T.x2,T.y2,s?COL_CYN:COL_MAG);const n=F(e,10);Z===1&&drawCircle(T.x1,T.y1,1,n),Z===2&&drawCircle(T.x2,T.y2,1,n),Z===3&&drawCircle(O.x1,O.y1,1,n),Z===4&&drawCircle(O.x2,O.y2,1,n),m(1,"LINE-LINE",COL_RED)}let w,We,Le;function Rs(){w={x1:12,y1:28,x2:28,y2:12},We={x:32,y:32,radius:12},Le=1}function Is(e){e%5===0&&(isPressed(BTN_A)?Le=wrap(Le+1,1,3):(Le===1&&(isPressed(BTN_U)&&w.y1>0&&w.y1--,isPressed(BTN_D)&&w.y1<GFX_H-1&&w.y1++,isPressed(BTN_L)&&w.x1>0&&w.x1--,isPressed(BTN_R)&&w.x1<GFX_W-1&&w.x1++),Le===2&&(isPressed(BTN_U)&&w.y2>0&&w.y2--,isPressed(BTN_D)&&w.y2<GFX_H-1&&w.y2++,isPressed(BTN_L)&&w.x2>0&&w.x2--,isPressed(BTN_R)&&w.x2<GFX_W-1&&w.x2++)));const s=d1(w,We);clearGfx(s?COL_YEL:COL_BLK),drawCircle(We.x,We.y,We.radius,s?COL_MAG:COL_CYN,s?COL_MAG:COL_CYN),drawLine(w.x1,w.y1,w.x2,w.y2,s?COL_CYN:COL_MAG);const n=F(e,10);Le===1&&drawCircle(w.x1,w.y1,1,n),Le===2&&drawCircle(w.x2,w.y2,1,n),m(1,"LINE-CIRCLE",COL_RED)}let B,ve,_e;function Es(){B={x1:4,y1:16,x2:28,y2:4},ve={x:22,y:18,width:28,height:36},_e=1}function ms(e){e%5===0&&(isPressed(BTN_A)?_e=wrap(_e+1,1,3):(_e===1&&(isPressed(BTN_U)&&B.y1>0&&B.y1--,isPressed(BTN_D)&&B.y1<GFX_H-1&&B.y1++,isPressed(BTN_L)&&B.x1>0&&B.x1--,isPressed(BTN_R)&&B.x1<GFX_W-1&&B.x1++),_e===2&&(isPressed(BTN_U)&&B.y2>0&&B.y2--,isPressed(BTN_D)&&B.y2<GFX_H-1&&B.y2++,isPressed(BTN_L)&&B.x2>0&&B.x2--,isPressed(BTN_R)&&B.x2<GFX_W-1&&B.x2++)));const s=o1(B,ve);clearGfx(s?COL_YEL:COL_BLK),drawRectangle(ve.x,ve.y,ve.width,ve.height,s?COL_MAG:COL_CYN,s?COL_MAG:COL_CYN),drawLine(B.x1,B.y1,B.x2,B.y2,s?COL_CYN:COL_MAG);const n=F(e,10);_e===1&&drawCircle(B.x1,B.y1,1,n),_e===2&&drawCircle(B.x2,B.y2,1,n),m(1,"LINE-RECT",COL_RED)}let R,Ge,e1,ge;function vs(){R={x1:4,y1:16,x2:28,y2:4},Ge=3,e1={vertices:[{x:36,y:12},{x:14,y:50},{x:52,y:46}]},ge=1}function Gs(e){e%5===0&&(isPressed(BTN_A)?(ge=wrap(ge+1,1,3),isPressed(BTN_U)&&Ge<12&&Ge++,isPressed(BTN_D)&&Ge>3&&Ge--,(isPressed(BTN_U)||isPressed(BTN_D)||isPressed(BTN_L)||isPressed(BTN_R))&&(e1.vertices=Je(32,32,10,25,Ge))):(ge===1&&(isPressed(BTN_U)&&R.y1>0&&R.y1--,isPressed(BTN_D)&&R.y1<GFX_H-1&&R.y1++,isPressed(BTN_L)&&R.x1>0&&R.x1--,isPressed(BTN_R)&&R.x1<GFX_W-1&&R.x1++),ge===2&&(isPressed(BTN_U)&&R.y2>0&&R.y2--,isPressed(BTN_D)&&R.y2<GFX_H-1&&R.y2++,isPressed(BTN_L)&&R.x2>0&&R.x2--,isPressed(BTN_R)&&R.x2<GFX_W-1&&R.x2++)));const s=f1(R,e1);clearGfx(s?COL_YEL:COL_BLK),drawPolygon(e1.vertices,s?COL_MAG:COL_CYN,s?COL_MAG:COL_CYN),drawLine(R.x1,R.y1,R.x2,R.y2,s?COL_CYN:COL_MAG);const n=F(e,10);ge===1&&drawCircle(R.x1,R.y1,1,n),ge===2&&drawCircle(R.x2,R.y2,1,n),m(1,"LINE-POLY",COL_RED)}let $,ie;function ps(){$={x:16,y:16,radius:5},ie={x:32,y:32,radius:11}}function Ys(e){if(e%5===0){if(isPressed(BTN_A)){$.radius=randomInt(0,16),ie.radius=randomInt(0,14);const n=Math.random()*Math.PI*2;$.x=ie.x+Math.cos(n)*(ie.radius+$.radius+3),$.y=ie.y+Math.sin(n)*(ie.radius+$.radius+3)}isPressed(BTN_U)&&$.y>0&&$.y--,isPressed(BTN_D)&&$.y<GFX_H-1&&$.y++,isPressed(BTN_L)&&$.x>0&&$.x--,isPressed(BTN_R)&&$.x<GFX_W-1&&$.x++}const s=M1($,ie);clearGfx(s?COL_YEL:COL_BLK),drawCircle(ie.x,ie.y,ie.radius,s?COL_MAG:COL_CYN,s?COL_MAG:COL_CYN),drawCircle($.x,$.y,$.radius,F(e,10),s?COL_CYN:COL_MAG),m(1,"CIRCLE-CIRCLE",COL_RED)}let J,te;function Ms(){J={x:24,y:24,radius:8},te={x:33,y:33,width:16,height:16}}function Ds(e){e%5===0&&(isPressed(BTN_A)&&(J.radius=randomInt(0,16),J.x=31-J.radius,J.y=31-J.radius,te.width=randomInt(1,30),te.height=randomInt(1,30),te.x=33,te.y=33),isPressed(BTN_U)&&J.y>0&&J.y--,isPressed(BTN_D)&&J.y<GFX_H-1&&J.y++,isPressed(BTN_L)&&J.x>0&&J.x--,isPressed(BTN_R)&&J.x<GFX_W-1&&J.x++);const s=C1(J,te);clearGfx(s?COL_YEL:COL_BLK),drawRectangle(te.x,te.y,te.width,te.height,s?COL_MAG:COL_CYN,s?COL_MAG:COL_CYN),drawCircle(J.x,J.y,J.radius,F(e,10),s?COL_CYN:COL_MAG),m(1,"CIRCLE-RECT",COL_RED)}let U,pe,s1;function $s(){U={x:16,y:16,radius:4},pe=3,s1={vertices:[{x:36,y:12},{x:14,y:50},{x:52,y:46}]}}function Js(e){e%5===0&&(isPressed(BTN_A)?(isPressed(BTN_U)&&pe<12&&pe++,isPressed(BTN_D)&&pe>3&&pe--,isPressed(BTN_L)&&U.radius>0&&U.radius--,isPressed(BTN_R)&&U.radius<16&&U.radius++,s1.vertices=Je(32,32,10,25,pe)):(isPressed(BTN_U)&&U.y>0&&U.y--,isPressed(BTN_D)&&U.y<GFX_H-1&&U.y++,isPressed(BTN_L)&&U.x>0&&U.x--,isPressed(BTN_R)&&U.x<GFX_W-1&&U.x++));const s=h1(U,s1);clearGfx(s?COL_YEL:COL_BLK),drawPolygon(s1.vertices,s?COL_MAG:COL_CYN,s?COL_MAG:COL_CYN),drawCircle(U.x,U.y,U.radius,F(e,10),s?COL_CYN:COL_MAG),m(1,"CIRCLE-POLY",COL_RED)}let v,re;function Us(){v={x:4,y:4,width:8,height:8},re={x:16,y:16,width:32,height:32}}function Fs(e){e%5===0&&(isPressed(BTN_A)&&(v.width=randomInt(1,30),v.height=randomInt(1,30),v.x=31-v.width,v.y=31-v.height,re.width=randomInt(1,30),re.height=randomInt(1,30),re.x=33,re.y=33),isPressed(BTN_U)&&v.y>0&&v.y--,isPressed(BTN_D)&&v.y+v.height<GFX_H&&v.y++,isPressed(BTN_L)&&v.x>0&&v.x--,isPressed(BTN_R)&&v.x+v.width<GFX_W&&v.x++);const s=D1(v,re);clearGfx(s?COL_YEL:COL_BLK),drawRectangle(re.x,re.y,re.width,re.height,s?COL_MAG:COL_CYN,s?COL_MAG:COL_CYN),drawRectangle(v.x,v.y,v.width,v.height,F(e,10),s?COL_CYN:COL_MAG),m(1,"RECT-RECT",COL_RED)}let I,Ye,i1;function bs(){I={x:2,y:2,width:8,height:8},Ye=3,i1={vertices:[{x:36,y:12},{x:14,y:50},{x:52,y:46}]}}function Xs(e){e%5===0&&(isPressed(BTN_A)?(isPressed(BTN_U)&&Ye<12&&Ye++,isPressed(BTN_D)&&Ye>3&&Ye--,isPressed(BTN_L)&&(I.width=randomInt(1,16),I.height=randomInt(1,16),I.x=2,I.y=2),isPressed(BTN_R)&&(I.width=randomInt(32,60),I.height=randomInt(32,60),I.x=62-I.width,I.y=62-I.height),i1.vertices=Je(32,32,10,25,Ye)):(isPressed(BTN_U)&&I.y>0&&I.y--,isPressed(BTN_D)&&I.y+I.height<GFX_H&&I.y++,isPressed(BTN_L)&&I.x>0&&I.x--,isPressed(BTN_R)&&I.x+I.width<GFX_W&&I.x++));const s=P1(I,i1);clearGfx(s?COL_YEL:COL_BLK),drawPolygon(i1.vertices,s?COL_MAG:COL_CYN,s?COL_MAG:COL_CYN),drawRectangle(I.x,I.y,I.width,I.height,F(e,10),s?COL_CYN:COL_MAG),m(1,"RECT-POLY",COL_RED)}let Me,Q,De,t1;function Ws(){Me=3,Q={vertices:[{x:17,y:4},{x:3,y:27},{x:30,y:30}]},De=3,t1={vertices:[{x:34,y:34},{x:52,y:40},{x:42,y:60}]}}function Ks(e){e%5===0&&(isPressed(BTN_A)?(isPressed(BTN_U)&&De<12&&De++,isPressed(BTN_D)&&De>3&&De--,isPressed(BTN_L)&&Me>3&&Me--,isPressed(BTN_R)&&Me<12&&Me++,t1.vertices=Je(44,44,3,24,De),Q.vertices=Je(20,20,3,24,Me)):(isPressed(BTN_U)&&p1(Q)>0&&ze(Q,0,-1),isPressed(BTN_D)&&p1(Q)<GFX_H&&ze(Q,0,1),isPressed(BTN_L)&&G1(Q)>0&&ze(Q,-1,0),isPressed(BTN_R)&&G1(Q)<GFX_W&&ze(Q,1,0)));const s=$1(Q,t1);clearGfx(s?COL_YEL:COL_BLK),drawPolygon(t1.vertices,s?COL_MAG:COL_CYN,s?COL_MAG:COL_CYN),drawPolygon(Q.vertices,F(e,10),s?COL_CYN:COL_MAG),m(1,"POLY-POLY",COL_RED)}const G1=e=>e.vertices.reduce((s,n)=>s+n.x,0)/e.vertices.length,p1=e=>e.vertices.reduce((s,n)=>s+n.y,0)/e.vertices.length,ze=(e,s,n)=>{for(let d=0;d<e.vertices.length;d++)e.vertices[d].x+=s,e.vertices[d].y+=n};fc64Init(Ss,Hs);var _1=(e=>(e.Menu="Menu",e.Autoplay="AUTOPLAY",e.PointPoint="POINT-POINT",e.PointLine="POINT-LINE",e.PointCircle="POINT-CIRCLE",e.PointRect="POINT-RECT",e.PointPoly="POINT-POLY",e.LineLine="LINE-LINE",e.LineCircle="LINE-CIRCLE",e.LineRect="LINE-RECT",e.LinePoly="LINE-POLY",e.CircleCircle="CIRCLE-CIRCLE",e.CircleRect="CIRCLE-RECT",e.CirclePoly="CIRCLE-POLY",e.RectRect="RECT-RECT",e.RectPoly="RECT-POLY",e.PolyPoly="POLY-POLY",e))(_1||{});let Y,g;function Ss(){g1("Menu")}function Hs(){Y++,isPressed(BTN_B)&&g1("Menu"),g==="Menu"&&z1(Y),g==="AUTOPLAY"&&as(Y),g==="POINT-POINT"&&hs(Y),g==="POINT-LINE"&&Ls(Y),g==="POINT-CIRCLE"&&gs(Y),g==="POINT-RECT"&&Ns(Y),g==="POINT-POLY"&&Os(Y),g==="LINE-LINE"&&Bs(Y),g==="LINE-CIRCLE"&&Is(Y),g==="LINE-RECT"&&ms(Y),g==="LINE-POLY"&&Gs(Y),g==="CIRCLE-CIRCLE"&&Ys(Y),g==="CIRCLE-RECT"&&Ds(Y),g==="CIRCLE-POLY"&&Js(Y),g==="RECT-RECT"&&Fs(Y),g==="RECT-POLY"&&Xs(Y),g==="POLY-POLY"&&Ks(Y)}function g1(e){Y=0,g=e,g==="Menu"&&Z1(),g==="AUTOPLAY"&&cs(),g==="POINT-POINT"&&Cs(),g==="POINT-LINE"&&Ps(),g==="POINT-CIRCLE"&&_s(),g==="POINT-RECT"&&As(),g==="POINT-POLY"&&Ts(),g==="LINE-LINE"&&ws(),g==="LINE-CIRCLE"&&Rs(),g==="LINE-RECT"&&Es(),g==="LINE-POLY"&&vs(),g==="CIRCLE-CIRCLE"&&ps(),g==="CIRCLE-RECT"&&Ms(),g==="CIRCLE-POLY"&&$s(),g==="RECT-RECT"&&Us(),g==="RECT-POLY"&&bs(),g==="POLY-POLY"&&Ws()}const F=(e,s)=>{const n=e%(3*s);return n<s?COL_RED:n<2*s?COL_GRN:COL_BLU},m=(e,s,n)=>drawText((64-s.length*4)/2,e,s,n),Vs=()=>Y=0;
